// Features
// ========


[data-grid='feature'] {
  display: grid;
  grid-column: left / gutter;
  grid-template-columns: repeat(6, minmax(0, 1fr));
}


[data-title='feature'] {
  @include angle('top');
  font-size: var(--xsmall);
  grid-column: 1 / -1;
  text-transform: uppercase;
}


[data-feature] {
  align-items: center;
  display: inherit;
  grid-column-gap: inherit;
  grid-template-columns: repeat(4, minmax(0, 1fr));
}


// Size & Position
[data-feature~='small'] {
  grid-column: 1 / span 3;

  & + & {
    grid-column-start: auto;
  }
}

[data-feature~='large'] {
  grid-column: 2 / -2;
}

.feature-image,
.feature-text {
  grid-row-start: 1;
}


// Text Layout
.feature-text {
  border: 0 solid var(--action);
  border-left-width: var(--border);
  grid-column: 1 / span 2;
  justify-self: start;
  padding: var(--shim) 0;
  position: relative;
  z-index: 2;

  .flip & {
    border-width: 0 var(--border) 0 0;
    grid-column-start: 3;
    justify-self: end;
    text-align: right;
  }

  * {
    display: inline;
  }
}

.feature-wrap {
  #{$link} {
    @include feature-type;
    --text-shadow: var(--action-hover);
    background-color: var(--action);
    color: var(--background);
  }
}


// Image Layout
$img-clip: polygon(
  var(--gutter) var(--gutter),
  calc(100% - var(--gutter-plus)) 0,
  100% 100%,
  0 calc(100% - var(--gutter))
);

$flip-clip: polygon(
  0 0,
  100% var(--gutter),
  calc(100% - var(--gutter)) calc(100% - var(--gutter)),
  var(--gutter-plus) 100%
);

.feature-image {
  background: var(--text);
  clip-path: $img-clip;
  grid-column: 2 / span 3;
  padding: var(--border);

  img {
    clip-path: inherit;
    width: 100%;
  }

  .flip & {
    clip-path: $flip-clip;
    grid-column-start: 1;
  }
}
