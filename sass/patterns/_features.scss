// Features
// ========


[data-grid='feature'] {
  display: grid;
  grid-column: left / gutter;
  grid-template-columns: repeat(6, minmax(0, 1fr));

  @include above('page') {
    margin-bottom: var(--spacer);
  }
}


[data-title='feature'] {
  @include angle('top');
  font-size: var(--xsmall);
  grid-column: 1 / -1;
  text-transform: uppercase;
  margin-bottom: neg(--gutter);
}


[data-feature] {
  #{$link} {
    align-items: center;
    display: inherit;
    grid-column-gap: inherit;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    text-decoration: none;
  }
}


// Size & Position
[data-feature~='large'] {
  grid-column: 1 / -1;

  @include above('extend') {
    grid-column: 2 / -2;
  }
}


[data-feature~='small'] {
  grid-column: 1 / -1;

  @include above('extend') {
    grid-column: auto / span 3;
  }
}

.feature-image,
.feature-text {
  grid-row-start: 1;
}


// Text Layout
.feature-text {
  border: 0 solid var(--action-hover);
  border-left-width: var(--border);
  grid-column: 1 / span 3;
  justify-self: start;
  padding: var(--shim) 0;
  position: relative;
  text-decoration: none;
  z-index: 2;

  @include below('extend') {
    :nth-of-type(even) > & {
      border-width: 0 var(--border) 0 0;
      grid-column-start: 2;
      justify-self: end;
      text-align: right;
    }
  }

  @include above('extend') {
    .flip & {
      border-width: 0 var(--border) 0 0;
      grid-column-start: 2;
      justify-self: end;
      text-align: right;
    }
  }
}


// Image Layout
$img-clip: polygon(
  var(--gutter) var(--gutter),
  calc(100% - var(--gutter-plus)) 0,
  100% 100%,
  0 calc(100% - var(--gutter))
);

$flip-clip: polygon(
  0 0,
  100% var(--gutter),
  calc(100% - var(--gutter)) calc(100% - var(--gutter)),
  var(--gutter-plus) 100%
);

.feature-image {
  background: var(--text);
  clip-path: $img-clip;
  grid-column: 2 / span 3;
  padding: var(--border);

  img {
    background: var(--background);
    clip-path: inherit;
    width: 100%;
  }

  @include below('extend') {
    :nth-of-type(even) > & {
      clip-path: $flip-clip;
      grid-column-start: 1;
    }
  }

  @include above('extend') {
    .flip & {
      clip-path: $flip-clip;
      grid-column-start: 1;
    }
  }
}
