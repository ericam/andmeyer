@import '../../node_modules/accoutrement-init/sass/init';

main {
  align-content: center;
  background: black;
  display: grid;
  grid-auto-flow: dense;
  grid-auto-rows: 25px;
  grid-template-columns: repeat(auto-fill, 25px);
  justify-content: center;

  &:hover {
    background: red;

    div {
      border-color: red;
    }
  }
}

div {
  --background: white;
  --column: 3;
  border: 4px solid black;
  display: grid;
  grid-auto-flow: dense;
  grid-template: repeat(5, minmax(0, 1fr)) / repeat(5, minmax(0, 1fr));
}

span {
  outline: 1px solid rgba(black, 0.5);
  background-color: var(--background);
  grid-column-start: var(--column);
}

@function get-span {
  $span: random(200);
  @if $span < 120 {
    @return 1;
  } @else if $span < 195 {
    @return 2;
  } @else if $span < 199 {
    @return 4;
  }

  @return 10;
}

div {
  @for $d from 1 through 300 {
    &:nth-child(#{$d}n) {
      $span: get-span();
      grid-column-end: span $span;
      grid-row-end: span $span;

      @for $i from 1 through 10 {
        $column: if(($i <= 5), 1, 2);

        span:nth-child(#{$i}),
        span:nth-child(#{15 + $i}) {
          --background: #{if((random(2) == 2), black, white)};
        }

        span:nth-child(#{$i}) {
          --column: #{$column};
        }

        span:nth-child(#{15 + $i}) {
          --column: #{$column * -1 - 1};
        }
      }

      @for $i from 11 through 15 {
         span:nth-child(#{$i}) {
          --background: #{if((random(2) == 2), black, white)};
        }
      }
    }
  }
}
