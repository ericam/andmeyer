{% import "modules/macros.j2" as mod %}
{% import "modules/event.macros.j2" as calendar %}


{% set events = config.past if module.time == 'past' else config.future %}


{% if events %}
  {% call mod.section(
    title=module.title or ['the', module.time]|join(' '),
    slug='calendar',
    has_filters=true
  ) %}

    {{ mod.filters(
      list=events|map(attribute='type')|unique_chain,
      uuid=module.time,
      lookup=config.event_tags[0]
    ) }}

    {% for event in events %}
      {{ calendar.show(event) }}
    {% endfor %}

  {% endcall %}
{% endif %}
