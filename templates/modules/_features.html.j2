{% import "utility.macros.j2" as utility %}
{% import "modules/macros.j2" as mod %}
{% import "gallery/macros.html.j2" as media %}


{% for feature in config.features %}
  {% call mod.section(
    slug='feature'
  ) %}

    <h2 class="section-title">
      {{ utility.link(feature.title, feature.url) }}
    </h2>

    {% if feature.with %}
      <div class="feature-with">
        with
        {% for bae in feature.with %}
          {% if loop.last and not loop.first %}and{% endif %}
          {{ utility.link(bae.name, bae.url) }}{% if (feature.with|length > 2) and (not loop.last) %},{% endif %}
        {% endfor %}
      </div>
    {% endif %}

    {% for review in feature.press %}
      <blockquote class="feature-quote">
        <p>{{ review.quote|safe }}</p>
        <cite>
          â€”{{ review.credit }},
          {{ utility.link(review.source, review.url) }}
        </cite>
      </blockquote>
    {% endfor %}

    {% for sample in feature.media %}
      {{ media.object(sample) }}
    {% endfor %}

    <div class="feature-actions">
      {% for action in feature.actions %}
        {{ utility.link(
          content=action.text,
          url=action.url,
          class='btn' if loop.first else 'secondary'
        ) }}
      {% endfor %}
    </div>

  {% endcall %}
{% endfor %}
