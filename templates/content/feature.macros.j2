{% import 'utility.macros.j2' as utility %}


{% macro show(slugs=none) %}
  <section data-grid="feature">
    {% for slug in (slugs or kwargs) %}
      {% set page = slug[0] if slugs else slug %}
      {% set page = all_pages|filter_pages('slug', 'eq', page)|get_page %}
      {% set size = slug[1] if slugs else kwargs[slug] %}
      {% if page and size %}
        {{ item(page, size) }}
      {% endif %}
    {% endfor %}
  </section>
{% endmacro %}


{% macro item(
  page,
  size='small'
) %}
  {% set image = page.config.image[0] if page.config.image else none %}
  {% set src = '/static/pictures/%s' % image.src if image else none %}
  {% set style = [src or '', scale or '', pos or '']|join if src else none %}
  {% set url = '/' + page.slug|replace('/index', '') + '/' %}
  {% set link = page.config.elsewhere[0].url if page.config.elsewhere else url %}

  <article data-feature="{{ size }}" >
    <h2 class="feature-title">
      <a class="feature-link" href="{{ link }}">
        {{ page.title }}
      </a>
    </h2>
  </article>
{% endmacro %}
